webpackJsonp([0,6],{24:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.user=t.thing=void 0;var r=a(1),i=n(r);t.thing=i.default.resource("things{/_id}"),t.user=i.default.resource("users{/_id}")},90:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),i=n(r),o=a(6),s=a(41),l=a(192),c=n(l);t.default={props:{data:{type:Array,required:!0},rowKey:String,showPagination:{type:Boolean,default:!0}},data:function(){return{avaliableHeight:0,pending:!1,page:{current:1,limit:0,total:0}}},computed:(0,i.default)({},(0,o.mapGetters)(["globalConfig"])),watch:{"globalConfig.pageLimit":function(e){this.page.current=1,this.page.limit=e,this.$emit("page-change",1)}},components:{Pagination:c.default},methods:{calcTableAvaliableHeight:function(){var e=this;this.$nextTick(function(){e.avaliableHeight=e.$refs.wrapper.clientHeight})},query:function(e,t){var a=this;t=t||this.page.current,this.pending=!0;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=s.merge.apply(void 0,[{page:{current:t,limit:this.globalConfig.pageLimit}}].concat(r));return e.query(o).then(function(e){return e.json()}).then(function(e){return a.pending=!1,a.page.current=t||a.page.current,a.page.total=e.page?e.page.total:e.results.length,e.results})},onPageChange:function(e){this.$emit("page-change",e)}},created:function(){this.page.limit=this.globalConfig.pageLimit},mounted:function(){this.calcTableAvaliableHeight(),window.addEventListener("resize",this.calcTableAvaliableHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.calcTableAvaliableHeight)}}},94:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),i=n(r),o=a(6);t.default={props:{current:{type:Number,default:1},total:{type:Number,default:1,required:!0}},computed:(0,i.default)({},(0,o.mapGetters)(["globalConfig"]),{pages:function(){return Math.round(this.total/this.globalConfig.pageLimit+.5)}}),methods:{change:function(e,t){t||this.$emit("page-change",e)},reset:function(){this.$emit("page-change",1)}}}},97:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(188),i=n(r),o=a(24);t.default={data:function(){return{search:{},form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},formVisible:!1,users:[]}},components:{DataTable:i.default},methods:{fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$refs.users.query(o.user,t,{search:this.search}).then(function(t){e.users=t}).catch(function(e){console.error(e)})},createUser:function(){this.formVisible=!0},cancelForm:function(){this.form.username="",this.form.password="",this.formVisible=!1},saveForm:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$http.post("users",e.form).then(function(){e.cancelForm(),e.$message({type:"success",message:"新增成功"}),e.fetch()}).catch(function(t){e.$message({type:"error",message:422===t.status?"用户名已存在":"新增失败"})})})},deleteUser:function(e){var t=this;this.$confirm("此操作将删除用户: "+e.username+", 是否继续?","提示",{type:"warning"}).then(function(){e.delete({_id:e._id}).then(function(){t.$message({type:"success",message:"删除成功!"}),t.fetch()})}).catch(function(){})}},mounted:function(){var e=this;this.$nextTick(function(){e.fetch()})}}},138:function(e,t,a){t=e.exports=a(14)(),t.push([e.id,".ui-data-table .toolbar{margin-bottom:.5rem}.ui-data-table .toolbar .el-form-item{margin-bottom:0}.ui-data-table .data-table{position:relative;margin:0 -1rem;font-size:.75rem;border-left:none;border-right:none}.ui-data-table .data-table .el-table:before{background:none}.ui-data-table .data-table>.data-loading{position:absolute;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,100%,.9);z-index:10}.ui-data-table .data-table>.data-loading .loader-inner{position:relative}.ui-data-table .data-table>.data-loading .loader-inner>div{position:absolute;left:0;top:0;width:35px;height:35px;border:2px solid #20a0ff;border-bottom-color:transparent;border-top-color:transparent;border-radius:100%;animation:rotate 1s 0s ease-in-out infinite;animation-fill-mode:both}.ui-data-table .data-table>.data-loading .loader-inner>div:last-child{display:inline-block;left:10px;top:10px;width:15px;height:15px;animation-duration:.5s;border-color:#20a0ff transparent;animation-direction:reverse}.ui-data-table .data-table .actions{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.ui-data-table .data-table .actions .el-tooltip{margin-left:1rem}.ui-data-table .data-table .actions .el-tooltip:first-child{margin-left:0}.ui-data-table .data-table .actions .el-tooltip .el-tooltip__rel{display:inline-block;line-height:1rem}.ui-data-table .data-table .actions .icon{margin-left:.5rem;line-height:1rem;font-size:1rem;color:#20a0ff;cursor:pointer}.ui-data-table .data-table .actions .icon:first-child{margin-left:0}.ui-data-table .data-table .actions .icon:hover{color:#58b7ff}.ui-data-table .data-table .fade-enter-active,.ui-data-table .data-table .fade-leave-active{transition:opacity .5s}.ui-data-table .data-table .fade-enter,.ui-data-table .data-table .fade-leave-active{opacity:0}@media (max-width:64rem){.ui-data-table .data-table .actions .el-tooltip{margin-left:.5rem}}",""])},139:function(e,t,a){t=e.exports=a(14)(),t.push([e.id,".ui-pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin:0 -1rem -1rem;padding:.75rem 1rem;border-top:1px solid #d3dce6;background-color:#fff}.ui-pagination .navs>a{float:left;width:2rem;height:1.75rem;line-height:1.75rem;text-align:center;border-right:1px solid #d3dce6;background-color:#fff;color:#475669;border:1px solid #d3dce6;border-right:none;cursor:pointer}.ui-pagination .navs>a:last-child{border-right:1px solid #d3dce6}.ui-pagination .navs>a[disabled]{color:#c0ccda;cursor:not-allowed;background-color:#eff2f7}.ui-pagination .navs>a:hover{background-color:#20a0ff;color:#fff;border-color:#20a0ff}",""])},158:function(e,t,a){var n=a(138);"string"==typeof n&&(n=[[e.id,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},159:function(e,t,a){var n=a(139);"string"==typeof n&&(n=[[e.id,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},188:function(e,t,a){var n,r;a(158),n=a(90);var i=a(198);r=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(r=n=n.default),"function"==typeof r&&(r=r.options),r.render=i.render,r.staticRenderFns=i.staticRenderFns,e.exports=n},192:function(e,t,a){var n,r;a(159),n=a(94);var i=a(199);r=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(r=n=n.default),"function"==typeof r&&(r=r.options),r.render=i.render,r.staticRenderFns=i.staticRenderFns,e.exports=n},196:function(e,t,a){var n,r;n=a(97);var i=a(207);r=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(r=n=n.default),"function"==typeof r&&(r=r.options),r.render=i.render,r.staticRenderFns=i.staticRenderFns,e.exports=n},198:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"ui-data-table flex flex-1 flex-column"},[e.$slots.toolbar?t("div",{staticClass:"toolbar"},[e._t("toolbar")]):e._e()," ",t("div",{ref:"wrapper",staticClass:"data-table flex flex-1"},[t("el-table",{attrs:{data:e.data,border:"",height:e.avaliableHeight,"row-key":function(t){return t[e.rowKey]}}},[e._t("default")])," ",e._t("table")," ",t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.pending,expression:"pending"}],staticClass:"data-loading flex flex-main-center flex-cross-center"},[t("div",{staticClass:"loader-inner"},[t("div")," ",t("div")])])])])," ",e.showPagination?t("pagination",{attrs:{current:e.page.current,total:e.page.total||0},on:{"page-change":e.onPageChange}}):e._e()])},staticRenderFns:[]}},199:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"ui-pagination"},[t("span",{staticClass:"current"},[e._s(e.$t("pagination.current"))+" "+e._s(e.current)+" "+e._s(e.$t("pagination.currentAppend"))+"  "+e._s(e.$t("pagination.pages"))+" "+e._s(e.pages)+" "+e._s(e.$t("pagination.pagesAppend"))])," ",t("div",{staticClass:"navs"},[t("a",{attrs:{disabled:e.current<=1},on:{click:function(t){e.change(1,e.current<=1)}}},[t("span",{staticClass:"iconfont icon-home-page"})])," ",t("a",{attrs:{disabled:e.current<=1},on:{click:function(t){e.change(e.current-1,e.current<=1)}}},[t("el-icon",{attrs:{name:"arrow-left"}})])," ",t("a",{attrs:{disabled:e.current>=e.pages},on:{click:function(t){e.change(e.current+1,e.current>=e.pages)}}},[t("el-icon",{attrs:{name:"arrow-right"}})])," ",t("a",{attrs:{disabled:e.current>=e.pages},on:{click:function(t){e.change(e.pages,e.current>=e.pages)}}},[t("span",{staticClass:"iconfont icon-last-page"})])," ",t("a",{on:{click:function(t){e.$emit("page-change",e.current)}}},[t("span",{staticClass:"iconfont icon-refresh"})])])])},staticRenderFns:[]}},207:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("content-module",{attrs:{name:"users"}},[t("el-breadcrumb",{staticStyle:{"margin-bottom":".5rem"},attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:"/dashboard"}},["首页"])," ",t("el-breadcrumb-item",["用户管理"])])," ",t("data-table",{ref:"users",attrs:{data:e.users,"row-key":"_id"},on:{"page-change":e.fetch}},[t("div",{slot:"toolbar"},[t("el-button",{attrs:{type:"primary",icon:"plus"},nativeOn:{click:function(t){e.createUser(t)}}},["新增"])])," ",t("el-table-column",{attrs:{property:"_id",label:"ID",sortable:"","min-width":"120"}})," ",t("el-table-column",{attrs:{property:"username",label:"用户名",sortable:"","min-width":"120"}})," ",t("el-table-column",{attrs:{property:"role",label:"角色","min-width":"90"}})," ",t("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},inlineTemplate:{render:function(){var e=this,t=e.$createElement;return[t("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){e.deleteUser(e.row)}}},["删除"])]},staticRenderFns:[]}})])," ",t("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.formVisible,expression:"formVisible"}],attrs:{title:"新增用户"},domProps:{value:e.formVisible},on:{close:e.cancelForm,input:function(t){e.formVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"close-on-click-modal":!1,"close-on-press-escape":!1}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],domProps:{value:e.form.username},on:{input:function(t){e.form.username=t}}})])," ",t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password"},domProps:{value:e.form.password},on:{input:function(t){e.form.password=t}}})])])," ",t("span",{staticClass:"dialog-footer",slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.formVisible=!1}}},["取 消"])," ",t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.saveForm(t)}}},["确 定"])])])])},staticRenderFns:[]}}});
//# sourceMappingURL=0.9bdc2f29308e5f9c0d97.js.map